!function(){"use strict";var e=".content",t={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.data,o=t.cardSelector,i=t.handleCardClick,a=t.deleteCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=r.name,this._image=r.link,this._likes=r.likes,this._likesNumber=r.likes.length,this._id=r._id,this._owner=r.owner,this._cardSelector=o,this._handleCardClick=i,this._deleteCardClick=a,this._api=n}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_isLiked",value:function(){var e=this,t=this._api.getUserData().then((function(n){e._likes.some((function(e){if(JSON.stringify(e._id)===JSON.stringify(n._id))return t=!0})),!0===t&&(e._element.querySelector(".like-button").classList.add("like-button_active"),e._element.querySelector(".card__likes").classList.add("card__likes_active"))}))}},{key:"_isNotMine",value:function(){var e=this;this._api.getUserData().then((function(t){JSON.stringify(e._owner)!==JSON.stringify(t)&&e._element.querySelector(".card__delete-icon").classList.add("card__delete-icon_hidden")}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._isNotMine(),this._isLiked(),this._element.querySelector(".card__image").src=this._image,this._element.querySelector(".card__image").alt=this._text,this._element.querySelector(".card__title").textContent=this._text,this._element.querySelector(".card__likes").textContent=this._likesNumber,this._element.querySelector(".card__id").textContent=this._id,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".like-button").addEventListener("click",(function(){e._likeCard()})),this._element.querySelector(".card__delete-icon").addEventListener("click",(function(){e._deleteCardClick()})),this._element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick()}))}},{key:"_likeCard",value:function(){var e=this;this._element.querySelector(".like-button").classList.toggle("like-button_active"),this._element.querySelector(".card__likes").classList.toggle("card__likes_active"),this._element.querySelector(".like-button").classList.contains("like-button_active")?this._api.likeCard(this._id).then((function(t){e._element.querySelector(".card__likes").textContent=t.likes.length})):this._api.unlikeCard(this._id).then((function(t){e._element.querySelector(".card__likes").textContent=t.likes.length}))}},{key:"deleteCard",value:function(){this._element.remove()}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_showInputError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),i(this,"_hideInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?t.classList.add(this._inactiveButtonClass):t.classList.remove(this._inactiveButtonClass)}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector)),n=this._formElement.querySelector(this._submitButtonSelector);this._toggleButtonState(t,n),t.forEach((function(r){r.addEventListener("input",(function(){e._isValid(r),e._toggleButtonState(t,n)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_opened")}},{key:"close",value:function(){this._element.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this._element.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._element.addEventListener("click",(function(t){t.target.closest(".popup__container")||e.close()})),this._handleEscClose()}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function y(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e){p(m(a.prototype),"open",this).call(this),this._card=e,this._element.querySelector(".popup__expanded-image").src=this._card.querySelector(".card__image").src,this._element.querySelector(".popup__place-name").textContent=this._card.querySelector(".card__title").textContent}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function C(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(e){var t,n=e.popupSelector,r=e.formSelector,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._formElement=document.querySelector(r),t._handleFormSubmit=o,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;S(w(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){var e;S(w(a.prototype),"close",this).call(this),this._formElement.reset(),e=this._formElement,Array.from(e.querySelectorAll(".popup__input")).forEach((function(t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),n.classList.remove("popup__error_visible"),n.textContent=""}))}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._formValues={name:this._name.textContent,about:this._about.textContent},this._formValues}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=new(function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"_loadingData",value:function(e,t){document.querySelector(t).textContent=e?"Salvando...":"Salvar"}},{key:"addCard",value:function(e){return this._loadingData(!0,"#create-card"),fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally(this._loadingData(!1,"#create-card"))}},{key:"deleteCard",value:function(e){fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"unlikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getUserData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveUserData",value:function(e){var t=e.name,n=e.about;this._loadingData(!0,"#edit-profile_save"),fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally(this._loadingData(!1,"#edit-profile_save"))}},{key:"updateUserImage",value:function(e){this._loadingData(!0,"#edit-avatar_save"),fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally(this._loadingData(!1,"#edit-avatar_save"))}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://around.nomoreparties.co/v1/web_ptbr_cohort_01",headers:{authorization:"0c70245d-208a-4884-9ebb-077526421f9a","Content-Type":"application/json"}});function U(){return new P({nameSelector:".header__title",aboutSelector:".header__subtitle"})}q.getUserData().then((function(e){U().setUserInfo(e),document.querySelector(".header__avatar").src=e.avatar}));var x=new O({popupSelector:"#edit-avatar_popup",formSelector:"#editAvatarForm",handleFormSubmit:function(e){q.updateUserImage(e.avatar),document.querySelector(".header__avatar").src=e.avatar}});x.setEventListeners(),document.querySelector(".edit-button_avatar").addEventListener("click",(function(){x.open()}));var I=new O({popupSelector:"#edit-profile_popup",formSelector:"#editProfileForm",handleFormSubmit:function(e){U().setUserInfo(e),q.saveUserData(e)}});I.setEventListeners(),document.querySelector(".edit-button_profile").addEventListener("click",(function(){I.open();var e=U().getUserInfo();document.querySelector("#input-name").value=e.name,document.querySelector("#input-about").value=e.about})),q.getInitialCards().then((function(t){var n=new s({items:t,renderer:function(e){var t=V(e);n.addItem(t)}},e);n.renderItems()}));var D=new O({popupSelector:"#add-card_popup",formSelector:"#addCardForm",handleFormSubmit:function(t){q.addCard(t).then((function(t){var n=V(t);document.querySelector(e).prepend(n)}))}});D.setEventListeners(),document.querySelector(".add-button").addEventListener("click",(function(){D.open()}));var T=new a(t,document.forms.addCardForm),R=new a(t,document.forms.editProfileForm),B=new a(t,document.forms.editAvatarForm);function V(e){var t=new r({data:e,cardSelector:"#cards__template",handleCardClick:function(){var e=new v(".popup_image");e.setEventListeners(),e.open(n)},deleteCardClick:function(){var e=new l("#delete-card_popup");e.setEventListeners(),e.open(),document.querySelector("#delete-card").addEventListener("click",(function(){t.deleteCard(),e.close(),q.deleteCard(n.querySelector(".card__id").textContent)}))}},q),n=t.generateCard();return n}T.enableValidation(),R.enableValidation(),B.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFHWEMsRUFBMEIsSUFBSWpILEVBQ2xDMUQsRUFDQTRCLFNBQVMySSxNQUFNSyxnQkFPakIsU0FBU1osRUFBV0QsR0FDbEIsSUFBTWMsRUFBTyxJQUFJdkssRUFDZixDQUNFRSxLQUFNdUosRUFDTnRKLGFBQWMsbUJBQ2RDLGdCQUFpQixXQUNmLElBQU1vSyxFQUFhLElBQUl4RSxFQUFlLGdCQUN0Q3dFLEVBQVd4QixvQkFDWHdCLEVBQVd2QixLQUFLaEQsRUFDakIsRUFDRDVGLGdCQUFpQixXQUNmLElBQU1vSyxFQUFrQixJQUFJaEYsRUFBTSxzQkFDbENnRixFQUFnQnpCLG9CQUNoQnlCLEVBQWdCeEIsT0FDaEIzSCxTQUFTQyxjQUFjLGdCQUFnQnFCLGlCQUFpQixTQUFTLFdBQy9EMkgsRUFBS0csYUFDTEQsRUFBZ0I5RSxRQUNoQjFGLEVBQUl5SyxXQUFXekUsRUFBWTFFLGNBQWMsYUFBYW9CLFlBQ3ZELEdBQ0YsR0FFSDFDLEdBRUlnRyxFQUFjc0UsRUFBS0ksZUFDekIsT0FBTzFFLENBQ1IsQ0E3QkQrRCxFQUFxQlksbUJBQ3JCVCxFQUF5QlMsbUJBQ3pCUCxFQUF3Qk8sa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29udGFpbmVyU2VsZWN0b3IgPSBcIi5jb250ZW50XCI7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlndXJhdGlvbk9iamVjdCA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgZGVsZXRlQ2FyZENsaWNrIH0sIGFwaSkge1xyXG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fbGlrZXNOdW1iZXIgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2sgPSBkZWxldGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9hcGkgPSBhcGk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2lzTGlrZWQoKSB7XHJcbiAgICBsZXQgaXNsaWtlZCA9IHRoaXMuX2FwaS5nZXRVc2VyRGF0YSgpLnRoZW4oKG1lKSA9PiB7XHJcbiAgICAgIHRoaXMuX2xpa2VzLnNvbWUoZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodXNlci5faWQpID09PSBKU09OLnN0cmluZ2lmeShtZS5faWQpKSB7XHJcbiAgICAgICAgICBpc2xpa2VkID0gdHJ1ZTtcclxuICAgICAgICAgIHJldHVybiBpc2xpa2VkO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChpc2xpa2VkID09PSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25cIilcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwibGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzXCIpXHJcbiAgICAgICAgICAuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2VzX2FjdGl2ZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaXNOb3RNaW5lKCkge1xyXG4gICAgdGhpcy5fYXBpLmdldFVzZXJEYXRhKCkudGhlbigobWUpID0+IHtcclxuICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMuX293bmVyKSAhPT0gSlNPTi5zdHJpbmdpZnkobWUpKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWljb25cIilcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fZGVsZXRlLWljb25faGlkZGVuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2lzTm90TWluZSgpO1xyXG4gICAgdGhpcy5faXNMaWtlZCgpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl90ZXh0O1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlc1wiKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzTnVtYmVyO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2lkXCIpLnRleHRDb250ZW50ID0gdGhpcy5faWQ7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2xpa2VDYXJkKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWljb25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZENsaWNrKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2xpa2VDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZXNcIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlc19hY3RpdmVcIik7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5saWtlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaWtlLWJ1dHRvbl9hY3RpdmVcIilcclxuICAgICkge1xyXG4gICAgICB0aGlzLl9hcGkubGlrZUNhcmQodGhpcy5faWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlc1wiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgICByZXMubGlrZXMubGVuZ3RoO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2FwaS51bmxpa2VDYXJkKHRoaXMuX2lkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZXNcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gZGF0YS5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBkYXRhLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGRhdGEuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGRhdGEuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGRhdGEuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKSk7XHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIik7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKCFldnQudGFyZ2V0LmNsb3Nlc3QoXCIucG9wdXBfX2NvbnRhaW5lclwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmRFbGVtZW50KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9jYXJkID0gY2FyZEVsZW1lbnQ7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2V4cGFuZGVkLWltYWdlXCIpLnNyYyA9XHJcbiAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmM7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BsYWNlLW5hbWVcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyByZXNldFZhbGlkYXRpb24gfSBmcm9tIFwiLi9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgZm9ybVNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgIHJlc2V0VmFsaWRhdGlvbih0aGlzLl9mb3JtRWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBjb250YWluZXJTZWxlY3RvciwgY29uZmlndXJhdGlvbk9iamVjdCB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfcHRicl9jb2hvcnRfMDFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjBjNzAyNDVkLTIwOGEtNDg4NC05ZWJiLTA3NzUyNjQyMWY5YVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBuZXdVc2VySW5mbygpIHtcclxuICByZXR1cm4gbmV3IFVzZXJJbmZvKHtcclxuICAgIG5hbWVTZWxlY3RvcjogXCIuaGVhZGVyX190aXRsZVwiLFxyXG4gICAgYWJvdXRTZWxlY3RvcjogXCIuaGVhZGVyX19zdWJ0aXRsZVwiLFxyXG4gIH0pO1xyXG59XHJcblxyXG5hcGkuZ2V0VXNlckRhdGEoKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgY29uc3QgdXNlckluZm8gPSBuZXdVc2VySW5mbygpO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19hdmF0YXJcIikuc3JjID0gZGF0YS5hdmF0YXI7XHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdEF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2VkaXQtYXZhdGFyX3BvcHVwXCIsXHJcbiAgZm9ybVNlbGVjdG9yOiBcIiNlZGl0QXZhdGFyRm9ybVwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XHJcbiAgICBhcGkudXBkYXRlVXNlckltYWdlKGl0ZW0uYXZhdGFyKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19hdmF0YXJcIikuc3JjID0gaXRlbS5hdmF0YXI7XHJcbiAgfSxcclxufSk7XHJcblxyXG5lZGl0QXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgZWRpdEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1idXR0b25fYXZhdGFyXCIpO1xyXG5lZGl0QXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2VkaXQtcHJvZmlsZV9wb3B1cFwiLFxyXG4gIGZvcm1TZWxlY3RvcjogXCIjZWRpdFByb2ZpbGVGb3JtXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0gbmV3VXNlckluZm8oKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGl0ZW0pO1xyXG4gICAgYXBpLnNhdmVVc2VyRGF0YShpdGVtKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYnV0dG9uX3Byb2ZpbGVcIik7XHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbiAgY29uc3QgdXNlckluZm8gPSBuZXdVc2VySW5mbygpO1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LW5hbWVcIikudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtYWJvdXRcIikudmFsdWUgPSB1c2VyRGF0YS5hYm91dDtcclxufSk7XHJcblxyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoaW5pdGlhbENhcmRzKSA9PiB7XHJcbiAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgICAgcmVuZGVyZXI6IChjYXJkSXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XHJcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY29udGFpbmVyU2VsZWN0b3JcclxuICApO1xyXG4gIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkX3BvcHVwXCIsXHJcbiAgZm9ybVNlbGVjdG9yOiBcIiNhZGRDYXJkRm9ybVwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChjYXJkSXRlbSkgPT4ge1xyXG4gICAgYXBpLmFkZENhcmQoY2FyZEl0ZW0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQocmVzKTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3RvcikucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWd1cmF0aW9uT2JqZWN0LFxyXG4gIGRvY3VtZW50LmZvcm1zLmFkZENhcmRGb3JtXHJcbik7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWd1cmF0aW9uT2JqZWN0LFxyXG4gIGRvY3VtZW50LmZvcm1zLmVkaXRQcm9maWxlRm9ybVxyXG4pO1xyXG5cclxuY29uc3QgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWd1cmF0aW9uT2JqZWN0LFxyXG4gIGRvY3VtZW50LmZvcm1zLmVkaXRBdmF0YXJGb3JtXHJcbik7XHJcblxyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZEl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGE6IGNhcmRJdGVtLFxyXG4gICAgICBjYXJkU2VsZWN0b3I6IFwiI2NhcmRzX190ZW1wbGF0ZVwiLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBjb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX2ltYWdlXCIpO1xyXG4gICAgICAgIGltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICBpbWFnZVBvcHVwLm9wZW4oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9LFxyXG4gICAgICBkZWxldGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBjb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXAoXCIjZGVsZXRlLWNhcmRfcG9wdXBcIik7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jYXJkXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcclxuICAgICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pZFwiKS50ZXh0Q29udGVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgYXBpXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF9sb2FkaW5nRGF0YShpc0xvYWRpbmcsIGJ1dHRvblNlbGVjdG9yKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uU2VsZWN0b3IpLnRleHRDb250ZW50ID0gXCJTYWx2YW5kby4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25TZWxlY3RvcikudGV4dENvbnRlbnQgPSBcIlNhbHZhclwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChkYXRhKSB7XHJcbiAgICB0aGlzLl9sb2FkaW5nRGF0YSh0cnVlLCBcIiNjcmVhdGUtY2FyZFwiKTtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkodGhpcy5fbG9hZGluZ0RhdGEoZmFsc2UsIFwiI2NyZWF0ZS1jYXJkXCIpKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHVubGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJEYXRhKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzYXZlVXNlckRhdGEoeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICB0aGlzLl9sb2FkaW5nRGF0YSh0cnVlLCBcIiNlZGl0LXByb2ZpbGVfc2F2ZVwiKTtcclxuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KHRoaXMuX2xvYWRpbmdEYXRhKGZhbHNlLCBcIiNlZGl0LXByb2ZpbGVfc2F2ZVwiKSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW1hZ2UoaW1hZ2VMaW5rKSB7XHJcbiAgICB0aGlzLl9sb2FkaW5nRGF0YSh0cnVlLCBcIiNlZGl0LWF2YXRhcl9zYXZlXCIpO1xyXG4gICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogaW1hZ2VMaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KHRoaXMuX2xvYWRpbmdEYXRhKGZhbHNlLCBcIiNlZGl0LWF2YXRhcl9zYXZlXCIpKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNvbnRhaW5lclNlbGVjdG9yIiwiY29uZmlndXJhdGlvbk9iamVjdCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImFwaSIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJkZWxldGVDYXJkQ2xpY2siLCJ0aGlzIiwiX3RleHQiLCJuYW1lIiwiX2ltYWdlIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2xpa2VzTnVtYmVyIiwibGVuZ3RoIiwiX2lkIiwiX293bmVyIiwib3duZXIiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9kZWxldGVDYXJkQ2xpY2siLCJfYXBpIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImlzbGlrZWQiLCJnZXRVc2VyRGF0YSIsInRoZW4iLCJtZSIsInNvbWUiLCJ1c2VyIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9lbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lzTm90TWluZSIsIl9pc0xpa2VkIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xpa2VDYXJkIiwidG9nZ2xlIiwiY29udGFpbnMiLCJsaWtlQ2FyZCIsInJlcyIsInVubGlrZUNhcmQiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dExpc3QiLCJ2YWxpZGl0eSIsInZhbGlkIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2lzVmFsaWQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNsb3NlIiwidGFyZ2V0IiwiY2xvc2VzdCIsIl9oYW5kbGVFc2NDbG9zZSIsImtleSIsIlBvcHVwV2l0aEltYWdlIiwiY2FyZEVsZW1lbnQiLCJfY2FyZCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJfbmFtZSIsIl9hYm91dCIsImFib3V0IiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZmV0Y2giLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiaXNMb2FkaW5nIiwiYnV0dG9uU2VsZWN0b3IiLCJfbG9hZGluZ0RhdGEiLCJtZXRob2QiLCJib2R5IiwiZmluYWxseSIsImNhcmRJZCIsImltYWdlTGluayIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJuZXdVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiZWRpdEF2YXRhclBvcHVwIiwidXBkYXRlVXNlckltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJvcGVuIiwiZWRpdFByb2ZpbGVQb3B1cCIsInNhdmVVc2VyRGF0YSIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJpbml0aWFsQ2FyZHMiLCJjYXJkTGlzdCIsImNhcmRJdGVtIiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsImFkZENhcmRQb3B1cCIsImFkZENhcmQiLCJwcmVwZW5kIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJmb3JtcyIsImFkZENhcmRGb3JtIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVGb3JtIiwiZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IiLCJlZGl0QXZhdGFyRm9ybSIsImNhcmQiLCJpbWFnZVBvcHVwIiwiZGVsZXRlQ2FyZFBvcHVwIiwiZGVsZXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9