!function(){"use strict";var e=".content",t={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.data,o=t.cardSelector,i=t.handleCardClick,a=t.deleteCardClick,c=t.myId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=r.name,this._image=r.link,this._likes=r.likes,this._likesNumber=r.likes.length,this._id=r._id,this._ownerId=r.owner._id,this._cardSelector=o,this._handleCardClick=i,this._deleteCardClick=a,this._api=n,this._myId=c}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_isLiked",value:function(){JSON.stringify(this._likes).includes(this._myId)&&(this._element.querySelector(".like-button").classList.add("like-button_active"),this._element.querySelector(".card__likes").classList.add("card__likes_active"))}},{key:"_isNotMine",value:function(){this._myId!==this._ownerId&&this._element.querySelector(".card__delete-icon").classList.add("card__delete-icon_hidden")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._isNotMine(),this._isLiked(),this._element.querySelector(".card__image").src=this._image,this._element.querySelector(".card__image").alt=this._text,this._element.querySelector(".card__title").textContent=this._text,this._element.querySelector(".card__likes").textContent=this._likesNumber,this._element.querySelector(".card__id").textContent=this._id,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".like-button").addEventListener("click",(function(){e._likeCard()})),this._element.querySelector(".card__delete-icon").addEventListener("click",(function(){e._deleteCardClick()})),this._element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick()}))}},{key:"_likeCard",value:function(){var e=this;this._element.querySelector(".like-button").classList.contains("like-button_active")?this._api.unlikeCard(this._id).then((function(t){e._updateLikeCounter(t),e._activateLike()})):this._api.likeCard(this._id).then((function(t){e._updateLikeCounter(t),e._activateLike()}))}},{key:"_updateLikeCounter",value:function(e){this._element.querySelector(".card__likes").textContent=e.likes.length}},{key:"_activateLike",value:function(){this._element.querySelector(".like-button").classList.toggle("like-button_active"),this._element.querySelector(".card__likes").classList.toggle("card__likes_active")}},{key:"deleteCard",value:function(){this._element.remove()}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_showInputError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),i(this,"_hideInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?t.classList.add(this._inactiveButtonClass):t.classList.remove(this._inactiveButtonClass)}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector)),n=this._formElement.querySelector(this._submitButtonSelector);this._toggleButtonState(t,n),t.forEach((function(r){r.addEventListener("input",(function(){e._isValid(r),e._toggleButtonState(t,n)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_opened")}},{key:"close",value:function(){this._element.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this._element.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._element.addEventListener("click",(function(t){t.target.closest(".popup__container")||e.close()})),this._handleEscClose()}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function y(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e){p(m(a.prototype),"open",this).call(this),this._card=e,this._element.querySelector(".popup__expanded-image").src=this._card.querySelector(".card__image").src,this._element.querySelector(".popup__place-name").textContent=this._card.querySelector(".card__title").textContent}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function E(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e){var t,n=e.popupSelector,r=e.formSelector,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._formElement=document.querySelector(r),t._handleFormSubmit=o,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;S(w(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){var e;S(w(a.prototype),"close",this).call(this),this._formElement.reset(),e=this._formElement,Array.from(e.querySelectorAll(".popup__input")).forEach((function(t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),n.classList.remove("popup__error_visible"),n.textContent=""}))}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._formValues={name:this._name.textContent,about:this._about.textContent},this._formValues}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=new(function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"_loadingData",value:function(e,t){document.querySelector(t).textContent=e?"Salvando...":"Salvar"}},{key:"addCard",value:function(e){return this._loadingData(!0,"#create-card"),fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally(this._loadingData(!1,"#create-card"))}},{key:"deleteCard",value:function(e){fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"unlikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getUserData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"updateUserData",value:function(e){var t=e.name,n=e.about;this._loadingData(!0,"#edit-profile_save"),fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally(this._loadingData(!1,"#edit-profile_save"))}},{key:"updateUserImage",value:function(e){this._loadingData(!0,"#edit-avatar_save"),fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally(this._loadingData(!1,"#edit-avatar_save"))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://around.nomoreparties.co/v1/web_ptbr_cohort_01",headers:{authorization:"0c70245d-208a-4884-9ebb-077526421f9a","Content-Type":"application/json"}});function I(){return new L({nameSelector:".header__title",aboutSelector:".header__subtitle"})}q.getUserData().then((function(e){I().setUserInfo(e),document.querySelector(".header__id").textContent=e._id,document.querySelector(".header__avatar").src=e.avatar}));var x=new j({popupSelector:"#edit-avatar_popup",formSelector:"#editAvatarForm",handleFormSubmit:function(e){q.updateUserImage(e.avatar),document.querySelector(".header__avatar").src=e.avatar}});x.setEventListeners(),document.querySelector(".avatar-button").addEventListener("click",(function(){x.open()}));var U=new j({popupSelector:"#edit-profile_popup",formSelector:"#editProfileForm",handleFormSubmit:function(e){I().setUserInfo(e),q.updateUserData(e)}});U.setEventListeners(),document.querySelector(".edit-button").addEventListener("click",(function(){U.open();var e=I().getUserInfo();document.querySelector("#input-name").value=e.name,document.querySelector("#input-about").value=e.about})),q.getInitialCards().then((function(t){var n=new u({items:t,renderer:function(e){var t=V(e);n.addItem(t)}},e);n.renderItems()}));var T=new j({popupSelector:"#add-card_popup",formSelector:"#addCardForm",handleFormSubmit:function(t){q.addCard(t).then((function(t){var n=V(t);document.querySelector(e).prepend(n)}))}});T.setEventListeners(),document.querySelector(".add-button").addEventListener("click",(function(){T.open()}));var D=new a(t,document.forms.addCardForm),R=new a(t,document.forms.editProfileForm),B=new a(t,document.forms.editAvatarForm);function V(e){var t=new r({data:e,cardSelector:"#cards__template",handleCardClick:function(){var e=new v(".popup_image");e.setEventListeners(),e.open(n)},deleteCardClick:function(){var e=new l("#delete-card_popup");e.setEventListeners(),e.open(),document.querySelector("#delete-card").addEventListener("click",(function(){t.deleteCard(),e.close(),q.deleteCard(n.querySelector(".card__id").textContent)}))},myId:document.querySelector(".header__id").textContent},q),n=t.generateCard();return n}D.enableValidation(),R.enableValidation(),B.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVdELEdBQ2xCLElBQU1jLEVBQU8sSUFBSXpLLEVBQ2YsQ0FDRUUsS0FBTXlKLEVBQ054SixhQUFjLG1CQUNkQyxnQkFBaUIsV0FDZixJQUFNc0ssRUFBYSxJQUFJekUsRUFBZSxnQkFDdEN5RSxFQUFXeEIsb0JBQ1h3QixFQUFXdkIsS0FBS2pELEVBQ2pCLEVBQ0Q3RixnQkFBaUIsV0FDZixJQUFNc0ssRUFBa0IsSUFBSWpGLEVBQU0sc0JBQ2xDaUYsRUFBZ0J6QixvQkFDaEJ5QixFQUFnQnhCLE9BQ2hCM0gsU0FBU0MsY0FBYyxnQkFBZ0JnQixpQkFBaUIsU0FBUyxXQUMvRGdJLEVBQUtHLGFBQ0xELEVBQWdCL0UsUUFDaEIzRixFQUFJMkssV0FBVzFFLEVBQVl6RSxjQUFjLGFBQWFlLFlBQ3ZELEdBQ0YsRUFDRGxDLEtBQU1rQixTQUFTQyxjQUFjLGVBQWVlLGFBRTlDdkMsR0FFSWlHLEVBQWN1RSxFQUFLSSxlQUN6QixPQUFPM0UsQ0FDUixDQTlCRGdFLEVBQXFCWSxtQkFDckJULEVBQXlCUyxtQkFDekJQLEVBQXdCTyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb250YWluZXJTZWxlY3RvciA9IFwiLmNvbnRlbnRcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWd1cmF0aW9uT2JqZWN0ID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgZGVsZXRlQ2FyZENsaWNrLCBteUlkIH0sXG4gICAgYXBpXG4gICkge1xuICAgIHRoaXMuX3RleHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2xpa2VzTnVtYmVyID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2sgPSBkZWxldGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fYXBpID0gYXBpO1xuICAgIHRoaXMuX215SWQgPSBteUlkO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9pc0xpa2VkKCkge1xuICAgIGNvbnN0IGxpa2VzQXJyYXkgPSBKU09OLnN0cmluZ2lmeSh0aGlzLl9saWtlcyk7XG4gICAgaWYgKGxpa2VzQXJyYXkuaW5jbHVkZXModGhpcy5fbXlJZCkpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25cIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJsaWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzXCIpXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZXNfYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIF9pc05vdE1pbmUoKSB7XG4gICAgaWYgKHRoaXMuX215SWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWljb25cIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19kZWxldGUtaWNvbl9oaWRkZW5cIik7XG4gICAgfVxuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5faXNOb3RNaW5lKCk7XG4gICAgdGhpcy5faXNMaWtlZCgpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2ltYWdlO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl90ZXh0O1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNOdW1iZXI7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2lkXCIpLnRleHRDb250ZW50ID0gdGhpcy5faWQ7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2xpa2VDYXJkKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1pY29uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZENsaWNrKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9saWtlQ2FyZCgpIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5fZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5saWtlLWJ1dHRvblwiKVxuICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlrZS1idXR0b25fYWN0aXZlXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLl9hcGkubGlrZUNhcmQodGhpcy5faWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICB0aGlzLl91cGRhdGVMaWtlQ291bnRlcihyZXMpO1xuICAgICAgICB0aGlzLl9hY3RpdmF0ZUxpa2UoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hcGkudW5saWtlQ2FyZCh0aGlzLl9pZCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUxpa2VDb3VudGVyKHJlcyk7XG4gICAgICAgIHRoaXMuX2FjdGl2YXRlTGlrZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgX3VwZGF0ZUxpa2VDb3VudGVyKHJlcykge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlc1wiKS50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XG4gIH1cblxuICBfYWN0aXZhdGVMaWtlKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlc1wiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlc19hY3RpdmVcIik7XG4gIH1cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGRhdGEuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gZGF0YS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBkYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBkYXRhLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBkYXRhLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICBfaXNWYWxpZChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWxlbWVudCkgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIikpO1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIik7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19lcnJvcl92aXNpYmxlXCIpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9KTtcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmICghZXZ0LnRhcmdldC5jbG9zZXN0KFwiLnBvcHVwX19jb250YWluZXJcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkRWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fY2FyZCA9IGNhcmRFbGVtZW50O1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19leHBhbmRlZC1pbWFnZVwiKS5zcmMgPVxyXG4gICAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1uYW1lXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgcmVzZXRWYWxpZGF0aW9uIH0gZnJvbSBcIi4vRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGZvcm1TZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICByZXNldFZhbGlkYXRpb24odGhpcy5fZm9ybUVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGNvbnRhaW5lclNlbGVjdG9yLCBjb25maWd1cmF0aW9uT2JqZWN0IH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX3B0YnJfY29ob3J0XzAxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjBjNzAyNDVkLTIwOGEtNDg4NC05ZWJiLTA3NzUyNjQyMWY5YVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmZ1bmN0aW9uIG5ld1VzZXJJbmZvKCkge1xuICByZXR1cm4gbmV3IFVzZXJJbmZvKHtcbiAgICBuYW1lU2VsZWN0b3I6IFwiLmhlYWRlcl9fdGl0bGVcIixcbiAgICBhYm91dFNlbGVjdG9yOiBcIi5oZWFkZXJfX3N1YnRpdGxlXCIsXG4gIH0pO1xufVxuXG5hcGkuZ2V0VXNlckRhdGEoKS50aGVuKChkYXRhKSA9PiB7XG4gIGNvbnN0IHVzZXJJbmZvID0gbmV3VXNlckluZm8oKTtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19pZFwiKS50ZXh0Q29udGVudCA9IGRhdGEuX2lkO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fYXZhdGFyXCIpLnNyYyA9IGRhdGEuYXZhdGFyO1xufSk7XG5cbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjZWRpdC1hdmF0YXJfcG9wdXBcIixcbiAgZm9ybVNlbGVjdG9yOiBcIiNlZGl0QXZhdGFyRm9ybVwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgIGFwaS51cGRhdGVVc2VySW1hZ2UoaXRlbS5hdmF0YXIpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19hdmF0YXJcIikuc3JjID0gaXRlbS5hdmF0YXI7XG4gIH0sXG59KTtcblxuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hdmF0YXItYnV0dG9uXCIpO1xuZWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0QXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2VkaXQtcHJvZmlsZV9wb3B1cFwiLFxuICBmb3JtU2VsZWN0b3I6IFwiI2VkaXRQcm9maWxlRm9ybVwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgIGNvbnN0IHVzZXJJbmZvID0gbmV3VXNlckluZm8oKTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpdGVtKTtcbiAgICBhcGkudXBkYXRlVXNlckRhdGEoaXRlbSk7XG4gIH0sXG59KTtcblxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYnV0dG9uXCIpO1xuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG4gIGNvbnN0IHVzZXJJbmZvID0gbmV3VXNlckluZm8oKTtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LW5hbWVcIikudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWFib3V0XCIpLnZhbHVlID0gdXNlckRhdGEuYWJvdXQ7XG59KTtcblxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGluaXRpYWxDYXJkcykgPT4ge1xuICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgIHtcbiAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgICByZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIGNvbnRhaW5lclNlbGVjdG9yXG4gICk7XG4gIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG59KTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNhZGQtY2FyZF9wb3B1cFwiLFxuICBmb3JtU2VsZWN0b3I6IFwiI2FkZENhcmRGb3JtXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChjYXJkSXRlbSkgPT4ge1xuICAgIGFwaS5hZGRDYXJkKGNhcmRJdGVtKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChyZXMpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3RvcikucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgfSk7XG4gIH0sXG59KTtcblxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBjb25maWd1cmF0aW9uT2JqZWN0LFxuICBkb2N1bWVudC5mb3Jtcy5hZGRDYXJkRm9ybVxuKTtcblxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGNvbmZpZ3VyYXRpb25PYmplY3QsXG4gIGRvY3VtZW50LmZvcm1zLmVkaXRQcm9maWxlRm9ybVxuKTtcblxuY29uc3QgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uZmlndXJhdGlvbk9iamVjdCxcbiAgZG9jdW1lbnQuZm9ybXMuZWRpdEF2YXRhckZvcm1cbik7XG5cbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0QXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZEl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGE6IGNhcmRJdGVtLFxuICAgICAgY2FyZFNlbGVjdG9yOiBcIiNjYXJkc19fdGVtcGxhdGVcIixcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICBjb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX2ltYWdlXCIpO1xuICAgICAgICBpbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGltYWdlUG9wdXAub3BlbihjYXJkRWxlbWVudCk7XG4gICAgICB9LFxuICAgICAgZGVsZXRlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cChcIiNkZWxldGUtY2FyZF9wb3B1cFwiKTtcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWNhcmRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2lkXCIpLnRleHRDb250ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgbXlJZDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2lkXCIpLnRleHRDb250ZW50LFxuICAgIH0sXG4gICAgYXBpXG4gICk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2xvYWRpbmdEYXRhKGlzTG9hZGluZywgYnV0dG9uU2VsZWN0b3IpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvblNlbGVjdG9yKS50ZXh0Q29udGVudCA9IFwiU2FsdmFuZG8uLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25TZWxlY3RvcikudGV4dENvbnRlbnQgPSBcIlNhbHZhclwiO1xuICAgIH1cbiAgfVxuXG4gIGFkZENhcmQoZGF0YSkge1xuICAgIHRoaXMuX2xvYWRpbmdEYXRhKHRydWUsIFwiI2NyZWF0ZS1jYXJkXCIpO1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGRhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSh0aGlzLl9sb2FkaW5nRGF0YShmYWxzZSwgXCIjY3JlYXRlLWNhcmRcIikpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckRhdGEoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJEYXRhKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHRoaXMuX2xvYWRpbmdEYXRhKHRydWUsIFwiI2VkaXQtcHJvZmlsZV9zYXZlXCIpO1xuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkodGhpcy5fbG9hZGluZ0RhdGEoZmFsc2UsIFwiI2VkaXQtcHJvZmlsZV9zYXZlXCIpKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbWFnZShpbWFnZUxpbmspIHtcbiAgICB0aGlzLl9sb2FkaW5nRGF0YSh0cnVlLCBcIiNlZGl0LWF2YXRhcl9zYXZlXCIpO1xuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBpbWFnZUxpbmssXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkodGhpcy5fbG9hZGluZ0RhdGEoZmFsc2UsIFwiI2VkaXQtYXZhdGFyX3NhdmVcIikpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29udGFpbmVyU2VsZWN0b3IiLCJjb25maWd1cmF0aW9uT2JqZWN0IiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiYXBpIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImRlbGV0ZUNhcmRDbGljayIsIm15SWQiLCJ0aGlzIiwiX3RleHQiLCJuYW1lIiwiX2ltYWdlIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2xpa2VzTnVtYmVyIiwibGVuZ3RoIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2RlbGV0ZUNhcmRDbGljayIsIl9hcGkiLCJfbXlJZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJKU09OIiwic3RyaW5naWZ5IiwiaW5jbHVkZXMiLCJfZWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pc05vdE1pbmUiLCJfaXNMaWtlZCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQ2FyZCIsImNvbnRhaW5zIiwidW5saWtlQ2FyZCIsInRoZW4iLCJyZXMiLCJfdXBkYXRlTGlrZUNvdW50ZXIiLCJfYWN0aXZhdGVMaWtlIiwibGlrZUNhcmQiLCJ0b2dnbGUiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dExpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9pc1ZhbGlkIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsInRhcmdldCIsImNsb3Nlc3QiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXkiLCJQb3B1cFdpdGhJbWFnZSIsImNhcmRFbGVtZW50IiwiX2NhcmQiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVNlbGVjdG9yIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiX25hbWUiLCJfYWJvdXQiLCJhYm91dCIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImZldGNoIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImlzTG9hZGluZyIsImJ1dHRvblNlbGVjdG9yIiwiX2xvYWRpbmdEYXRhIiwibWV0aG9kIiwiYm9keSIsImZpbmFsbHkiLCJjYXJkSWQiLCJpbWFnZUxpbmsiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwibmV3VXNlckluZm8iLCJnZXRVc2VyRGF0YSIsInNldFVzZXJJbmZvIiwiZWRpdEF2YXRhclBvcHVwIiwidXBkYXRlVXNlckltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJvcGVuIiwiZWRpdFByb2ZpbGVQb3B1cCIsInVwZGF0ZVVzZXJEYXRhIiwidXNlckRhdGEiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImluaXRpYWxDYXJkcyIsImNhcmRMaXN0IiwiY2FyZEl0ZW0iLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiYWRkQ2FyZFBvcHVwIiwiYWRkQ2FyZCIsInByZXBlbmQiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImZvcm1zIiwiYWRkQ2FyZEZvcm0iLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJlZGl0UHJvZmlsZUZvcm0iLCJlZGl0QXZhdGFyRm9ybVZhbGlkYXRvciIsImVkaXRBdmF0YXJGb3JtIiwiY2FyZCIsImltYWdlUG9wdXAiLCJkZWxldGVDYXJkUG9wdXAiLCJkZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=